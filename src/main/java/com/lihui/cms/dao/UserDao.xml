<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lihui.cms.dao.UserDao">


	
	<sql id="selects_sql">id,username,nickname,gender,birthday,created,updated,locked</sql>
	<select id="getUserList" resultMap="UserList">
		select <include refid="selects_sql"/> from cms_user
		<where>
			<if test="null!=username and username!=''">and username like concat('%${username}%')</if>
		</where>
	</select>
	<resultMap type="User" id="UserList">
		<id property="id" column="id"/>
		<result property="username" column="username"/>
		<result property="nickname" column="nickname"/>
		<!--性别在数据中是int类型 java类中是枚举类型 使用转换器 否则装载不了 -->
		<!-- org.apache.ibatis.type.EnumTypeHandler org.apache.ibatis.type.EnumOrdinalTypeHandler -->
		<result property="gender" column="gender"
		javaType="com.lihui.cms.domain.enums.Gender"
		typeHandler="org.apache.ibatis.type.EnumOrdinalTypeHandler"/>
		<result property="birthday" column="birthday"/>
		<result property="created" column="created"/>
		<result property="updated" column="updated"/>
		<result property="locked" column="locked"/>
	</resultMap>

</mapper>